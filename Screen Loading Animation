-- Sky-Base-Maker Loading Animation Script for Roblox
-- Theo phong cách MOONDIETY với tất cả hiệu ứng đẹp

local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tạo ScreenGui chính
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SkyBaseLoadingGui"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Background tối như MOONDIETY
local backgroundFrame = Instance.new("Frame")
backgroundFrame.Name = "Background"
backgroundFrame.Size = UDim2.new(1, 0, 1, 0)
backgroundFrame.Position = UDim2.new(0, 0, 0, 0)
backgroundFrame.BorderSizePixel = 0
backgroundFrame.BackgroundColor3 = Color3.fromRGB(8, 12, 20)
backgroundFrame.Parent = screenGui

-- Gradient background như trong ảnh MOONDIETY
local backgroundGradient = Instance.new("UIGradient")
backgroundGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 25, 35)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(8, 12, 20)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 30, 40))
}
backgroundGradient.Rotation = 45
backgroundGradient.Parent = backgroundFrame

-- Container chính giữa màn hình
local centerFrame = Instance.new("Frame")
centerFrame.Name = "CenterContent"
centerFrame.Size = UDim2.new(0, 500, 0, 400)
centerFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
centerFrame.BackgroundTransparency = 1
centerFrame.Parent = screenGui

-- LOGO ĐÁM MÂY GRADIENT
local cloudLogo = Instance.new("Frame")
cloudLogo.Name = "CloudLogo"
cloudLogo.Size = UDim2.new(0, 180, 0, 110)
cloudLogo.Position = UDim2.new(0.5, -90, 0, 50)
cloudLogo.BackgroundTransparency = 1
cloudLogo.Parent = centerFrame

-- Đám mây chính với gradient đẹp
local mainCloud = Instance.new("Frame")
mainCloud.Size = UDim2.new(0, 160, 0, 80)
mainCloud.Position = UDim2.new(0.5, -80, 0.5, -40)
mainCloud.BorderSizePixel = 0
mainCloud.Parent = cloudLogo

local cloudCorner = Instance.new("UICorner")
cloudCorner.CornerRadius = UDim.new(0.5, 0)
cloudCorner.Parent = mainCloud

local cloudGradient = Instance.new("UIGradient")
cloudGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),    -- Cyan
    ColorSequenceKeypoint.new(0.25, Color3.fromRGB(64, 224, 255)), -- Light Blue
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(138, 43, 226)),  -- Blue Violet
    ColorSequenceKeypoint.new(0.75, Color3.fromRGB(255, 20, 147)), -- Deep Pink
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 105, 180))    -- Hot Pink
}
cloudGradient.Rotation = 135
cloudGradient.Parent = mainCloud

-- Đám mây nhỏ bên trái
local leftCloud = Instance.new("Frame")
leftCloud.Size = UDim2.new(0, 60, 0, 45)
leftCloud.Position = UDim2.new(0, 15, 0, 25)
leftCloud.BorderSizePixel = 0
leftCloud.Parent = cloudLogo

local leftCorner = Instance.new("UICorner")
leftCorner.CornerRadius = UDim.new(0.5, 0)
leftCorner.Parent = leftCloud

local leftGradient = cloudGradient:Clone()
leftGradient.Parent = leftCloud

-- Đám mây nhỏ bên phải
local rightCloud = Instance.new("Frame")
rightCloud.Size = UDim2.new(0, 55, 0, 40)
rightCloud.Position = UDim2.new(0, 110, 0, 30)
rightCloud.BorderSizePixel = 0
rightCloud.Parent = cloudLogo

local rightCorner = Instance.new("UICorner")
rightCorner.CornerRadius = UDim.new(0.5, 0)
rightCorner.Parent = rightCloud

local rightGradient = cloudGradient:Clone()
rightGradient.Parent = rightCloud

-- Hiệu ứng glow cho logo
local logoGlow = Instance.new("Frame")
logoGlow.Size = UDim2.new(1.3, 0, 1.3, 0)
logoGlow.Position = UDim2.new(-0.15, 0, -0.15, 0)
logoGlow.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
logoGlow.BackgroundTransparency = 0.7
logoGlow.BorderSizePixel = 0
logoGlow.ZIndex = mainCloud.ZIndex - 1
logoGlow.Parent = cloudLogo

local glowCorner = Instance.new("UICorner")
glowCorner.CornerRadius = UDim.new(0.5, 0)
glowCorner.Parent = logoGlow

-- CHỮ VỚI FONT LUCKIESTGUY VÀ HIỆU ỨNG
local textContainer = Instance.new("Frame")
textContainer.Name = "TextContainer"
textContainer.Size = UDim2.new(0, 480, 0, 80)
textContainer.Position = UDim2.new(0.5, -240, 0, 180)
textContainer.BackgroundTransparency = 1
textContainer.Parent = centerFrame

local text = "SKY-BASE-MAKER"
local letters = {}
local spacing = 32 -- Khoảng cách giữa các chữ

for i = 1, #text do
    local char = string.sub(text, i, i)
    if char ~= "-" then
        local letter = Instance.new("TextLabel")
        letter.Name = "Letter" .. i
        letter.Size = UDim2.new(0, 35, 1, 0)
        letter.Position = UDim2.new(0, (i-1) * spacing, 0, 0)
        letter.BackgroundTransparency = 1
        letter.Text = char
        letter.TextSize = 30
        letter.TextScaled = true
        letter.Font = Enum.Font.LuckiestGuy
        letter.TextTransparency = 1
        letter.Parent = textContainer
        
        -- Gradient cho từng chữ
        local letterGradient = Instance.new("UIGradient")
        letterGradient.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),
            ColorSequenceKeypoint.new(0.3, Color3.fromRGB(138, 43, 226)),
            ColorSequenceKeypoint.new(0.7, Color3.fromRGB(255, 20, 147)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 165, 0))
        }
        letterGradient.Rotation = 90
        letterGradient.Parent = letter
        
        -- Glow effect cho chữ
        local textStroke = Instance.new("UIStroke")
        textStroke.Color = Color3.fromRGB(0, 255, 255)
        textStroke.Thickness = 3
        textStroke.Transparency = 0.3
        textStroke.Parent = letter
        
        table.insert(letters, letter)
    else
        -- Tạo dấu gạch ngang
        local dash = Instance.new("Frame")
        dash.Name = "Dash" .. i
        dash.Size = UDim2.new(0, 25, 0, 4)
        dash.Position = UDim2.new(0, (i-1) * spacing + 5, 0.5, -2)
        dash.BorderSizePixel = 0
        dash.BackgroundTransparency = 1
        dash.Parent = textContainer
        
        local dashGradient = Instance.new("UIGradient")
        dashGradient.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 20, 147))
        }
        dashGradient.Parent = dash
        
        table.insert(letters, dash)
    end
end

-- HỆ THỐNG HẠT HIỆU ỨNG
local particleFrame = Instance.new("Frame")
particleFrame.Name = "ParticleContainer"
particleFrame.Size = UDim2.new(1, 0, 1, 0)
particleFrame.BackgroundTransparency = 1
particleFrame.Parent = screenGui

local particles = {}
local function createParticle()
    local particle = Instance.new("Frame")
    particle.Size = UDim2.new(0, math.random(3, 8), 0, math.random(3, 8))
    particle.Position = UDim2.new(math.random(), 0, math.random(), 0)
    particle.BackgroundColor3 = Color3.fromRGB(
        math.random(100, 255),
        math.random(150, 255),
        255
    )
    particle.BorderSizePixel = 0
    particle.BackgroundTransparency = math.random(30, 70) / 100
    particle.Parent = particleFrame
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0.5, 0)
    corner.Parent = particle
    
    return particle
end

-- Tạo 100 hạt hiệu ứng
for i = 1, 100 do
    table.insert(particles, createParticle())
end

-- ANIMATION FUNCTIONS
local function animateParticles()
    for i, particle in ipairs(particles) do
        if particle and particle.Parent then
            local moveInfo = TweenInfo.new(
                math.random(10, 20),
                Enum.EasingStyle.Linear,
                Enum.EasingDirection.InOut,
                -1
            )
            
            local moveTween = TweenService:Create(particle, moveInfo, {
                Position = UDim2.new(math.random(), 0, math.random(), 0),
                Rotation = math.random(-180, 180)
            })
            moveTween:Play()
            
            -- Hiệu ứng fade
            local fadeInfo = TweenInfo.new(
                math.random(3, 8),
                Enum.EasingStyle.Sine,
                Enum.EasingDirection.InOut,
                -1, true
            )
            local fadeTween = TweenService:Create(particle, fadeInfo, {
                BackgroundTransparency = math.random(10, 90) / 100
            })
            fadeTween:Play()
        end
    end
end

-- Animation cho logo glow
local function animateLogoGlow()
    local glowInfo = TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
    local glowTween = TweenService:Create(logoGlow, glowInfo, {
        BackgroundTransparency = 0.9,
        Size = UDim2.new(1.5, 0, 1.5, 0),
        Position = UDim2.new(-0.25, 0, -0.25, 0)
    })
    glowTween:Play()
end

-- MAIN ANIMATION SEQUENCE (5 giây)
local function startLoadingSequence()
    -- Bắt đầu particle ngay lập tức
    animateParticles()
    
    -- Logo xuất hiện (0-1 giây)
    cloudLogo.Size = UDim2.new(0, 0, 0, 0)
    cloudLogo.Rotation = -90
    local logoAppearInfo = TweenInfo.new(1, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    local logoAppearTween = TweenService:Create(cloudLogo, logoAppearInfo, {
        Size = UDim2.new(0, 180, 0, 110),
        Rotation = 0
    })
    logoAppearTween:Play()
    animateLogoGlow()
    
    wait(1)
    
    -- Typewriter effect cho chữ (1-3.5 giây)
    local letterDelay = 2.5 / #letters
    for i, letter in ipairs(letters) do
        -- Scale animation khi xuất hiện
        letter.Size = letter.Size * 0.1
        letter.TextTransparency = 1
        letter.Position = letter.Position + UDim2.new(0, 0, 0, -20)
        
        -- Xuất hiện với bounce effect
        local appearInfo = TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
        local appearTween = TweenService:Create(letter, appearInfo, {
            TextTransparency = 0,
            BackgroundTransparency = 0,
            Size = letter.Size * 10,
            Position = letter.Position - UDim2.new(0, 0, 0, -20)
        })
        appearTween:Play()
        
        -- Floating effect
        local floatInfo = TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
        local floatTween = TweenService:Create(letter, floatInfo, {
            Position = letter.Position + UDim2.new(0, 0, 0, -5)
        })
        floatTween:Play()
        
        wait(letterDelay)
    end
    
    wait(0.5)
    
    -- Biến mất từ trái qua phải (3.5-5 giây)
    local disappearDelay = 1 / #letters
    for i, letter in ipairs(letters) do
        -- Glow effect trước khi biến mất
        local glowInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local glowTween = TweenService:Create(letter:FindFirstChild("UIStroke"), glowInfo, {
            Thickness = 8,
            Transparency = 0
        })
        glowTween:Play()
        
        wait(0.1)
        
        -- Biến mất với hiệu ứng đẹp
        local disappearInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        local disappearTween = TweenService:Create(letter, disappearInfo, {
            TextTransparency = 1,
            BackgroundTransparency = 1,
            Size = letter.Size * 0.1,
            Position = letter.Position + UDim2.new(0, 0, 0, 30),
            Rotation = math.random(-180, 180)
        })
        disappearTween:Play()
        
        wait(disappearDelay)
    end
    
    -- Logo biến mất
    local logoDisappearInfo = TweenInfo.new(0.8, Enum.EasingStyle.Back, Enum.EasingDirection.In)
    local logoDisappearTween = TweenService:Create(cloudLogo, logoDisappearInfo, {
        Size = UDim2.new(0, 0, 0, 0),
        Rotation = 90,
        Position = cloudLogo.Position + UDim2.new(0, 0, 0, -50)
    })
    logoDisappearTween:Play()
    
    -- Fade out toàn bộ màn hình
    wait(0.3)
    local fadeInfo = TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local fadeTween = TweenService:Create(screenGui, fadeInfo, {
        Enabled = false
    })
    fadeTween:Play()
    
    fadeTween.Completed:Connect(function()
        screenGui:Destroy()
    end)
end

-- Khởi động loading sequence
startLoadingSequence()

print("Sky-Base-Maker Loading Animation với hiệu ứng MOONDIETY đã khởi tạo!")
